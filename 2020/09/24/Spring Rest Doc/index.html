<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Spring Rest Doc | 개인 저장소</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="최근에 진행했던 프로젝트는 API문서화를 Swagger를 통해서 진행했었다.Swagger를 사용하면서 Code에 덕지덕지 Annotation을 붙여나가니 코드가 너무 더러워(?) 보이기도 하고중간중간 수정되는 부분에 대해 기민하게 대처가 되지 않았다.그러던 와중 DS가 Spring Rest Doc에 대한 정보를 줘서 공부하면서 정리해 본다. 포스팅에 작성된">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Rest Doc">
<meta property="og:url" content="http://yoursite.com/2020/09/24/Spring%20Rest%20Doc/index.html">
<meta property="og:site_name" content="개인 저장소">
<meta property="og:description" content="최근에 진행했던 프로젝트는 API문서화를 Swagger를 통해서 진행했었다.Swagger를 사용하면서 Code에 덕지덕지 Annotation을 붙여나가니 코드가 너무 더러워(?) 보이기도 하고중간중간 수정되는 부분에 대해 기민하게 대처가 되지 않았다.그러던 와중 DS가 Spring Rest Doc에 대한 정보를 줘서 공부하면서 정리해 본다. 포스팅에 작성된">
<meta property="og:locale">
<meta property="article:published_time" content="2020-09-24T13:25:07.425Z">
<meta property="article:modified_time" content="2020-09-24T14:09:13.435Z">
<meta property="article:author" content="Ming">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="개인 저장소" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">개인 저장소</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Spring Rest Doc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/24/Spring%20Rest%20Doc/" class="article-date">
  <time datetime="2020-09-24T13:25:07.425Z" itemprop="datePublished">2020-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Spring Rest Doc
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>최근에 진행했던 프로젝트는 API문서화를 Swagger를 통해서 진행했었다.<br>Swagger를 사용하면서 Code에 덕지덕지 Annotation을 붙여나가니 코드가 너무 더러워(?) 보이기도 하고<br>중간중간 수정되는 부분에 대해 기민하게 대처가 되지 않았다.<br>그러던 와중 DS가 Spring Rest Doc에 대한 정보를 줘서 공부하면서 정리해 본다.</p>
<p>포스팅에 작성된 코드는 <a href="https://github.com/thinkub/spring-rest-doc/" target="_blank" rel="noopener">https://github.com/thinkub/spring-rest-doc/</a> 를 참고</p>
<h1 id="Spring-Rest-Doc"><a href="#Spring-Rest-Doc" class="headerlink" title="Spring Rest Doc"></a>Spring Rest Doc</h1><p>공식 문서에서 소개된 내용을 번역하면 아래와 같다.</p>
<blockquote>
<p>Spring Rest Doc은 작성 서비스에 대한 정확하고 읽기 쉬운 문서를 작성하는 데 있다. Spring REST Docs는 기본적으로 Asciidoctor를 사용한다. Asciidoctor는 일반 텍스트를 처리하고 HTML을 생산하며, 필요에 맞게 스타일링하고 배치한다. 원하는 경우 Markdown을 사용하도록 Spring REST 문서를 구성할 수도 있다.<br>Spring REST Docs는 Spring MVC의 테스트 프레임워크, Spring WebFlux의 WebTestClient 또는 REST Assured으로 작성된 테스트에 의해 생산된 스니펫을 사용한다. 이러한 테스트 기반 접근 방식은 서비스 설명서의 정확성을 보장하는 데 도움이 된다. 코드 조각이 틀리면 이를 생성하는 테스트가 실패한다.</p>
</blockquote>
<p>간단하게 말해 Test Code기반으로 API문서를 생성해준다.<br>그렇기 때문에 Controller Layer에서의 테스트 코드는 필수 적으로 작성이 되어야 하며 통과가 되어야 한다. </p>
<h1 id="시작하기"><a href="#시작하기" class="headerlink" title="시작하기"></a>시작하기</h1><h3 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h3><ul>
<li>Java 8 이상</li>
<li>Spring Framework 5 (5.0.2 or later)</li>
</ul>
<h3 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">'org.springframework.boot'</span> version <span class="string">'2.3.4.RELEASE'</span></span><br><span class="line">    id <span class="string">'io.spring.dependency-management'</span> version <span class="string">'1.0.10.RELEASE'</span></span><br><span class="line">    id <span class="string">'org.asciidoctor.convert'</span> version <span class="string">'1.5.9.2'</span></span><br><span class="line">    id <span class="string">'java'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">group</span> = <span class="string">'com.ming'</span></span><br><span class="line">version = <span class="string">'0.0.1-SNAPSHOT'</span></span><br><span class="line"><span class="keyword">sourceCompatibility</span> = <span class="string">'11'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">    compileOnly &#123;</span><br><span class="line">        extendsFrom annotationProcessor</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ext &#123;</span><br><span class="line">    set(<span class="string">'snippetsDir'</span>, <span class="keyword">file</span>(<span class="string">"build/generated-snippets"</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-starter-data-jpa'</span></span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-starter-web'</span></span><br><span class="line">    compileOnly <span class="string">'org.projectlombok:lombok'</span></span><br><span class="line">    runtimeOnly <span class="string">'com.h2database:h2'</span></span><br><span class="line">    annotationProcessor <span class="string">'org.projectlombok:lombok'</span></span><br><span class="line">    testImplementation(<span class="string">'org.springframework.boot:spring-boot-starter-test'</span>) &#123;</span><br><span class="line">        <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">'org.junit.vintage'</span>, module: <span class="string">'junit-vintage-engine'</span></span><br><span class="line">    &#125;</span><br><span class="line">    testImplementation <span class="string">'org.springframework.restdocs:spring-restdocs-mockmvc'</span></span><br><span class="line">    testImplementation <span class="string">"org.junit.jupiter:junit-jupiter-api"</span></span><br><span class="line">    testImplementation <span class="string">"org.junit.jupiter:junit-jupiter-params"</span></span><br><span class="line">    testRuntimeOnly <span class="string">"org.junit.jupiter:junit-jupiter-engine"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test &#123;</span><br><span class="line">    outputs.dir snippetsDir</span><br><span class="line">    useJUnitPlatform()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asciidoctor &#123;</span><br><span class="line">    inputs.dir snippetsDir</span><br><span class="line">    dependsOn test</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asciidoctor.<span class="keyword">doFirst</span> &#123;</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">file</span>(<span class="string">'src/main/resources/static/docs'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> copyDocument(type: <span class="keyword">Copy</span>) &#123;</span><br><span class="line">    dependsOn asciidoctor</span><br><span class="line">    <span class="keyword">from</span> <span class="keyword">file</span>(<span class="string">"build/asciidoc/html5"</span>)</span><br><span class="line">    <span class="keyword">into</span> <span class="keyword">file</span>(<span class="string">"src/main/resources/static/docs"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">build &#123;</span><br><span class="line">    dependsOn copyDocument</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bootJar &#123;</span><br><span class="line">    dependsOn asciidoctor</span><br><span class="line">    <span class="keyword">from</span> (<span class="string">"$&#123;asciidoctor.outputDir&#125;/html5"</span>) &#123;</span><br><span class="line">        <span class="keyword">into</span> <span class="string">'static/docs'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Sample-User-Api"><a href="#Sample-User-Api" class="headerlink" title="Sample User Api"></a>Sample User Api</h3><h4 id="UserController-java"><a href="#UserController-java" class="headerlink" title="UserController.java"></a>UserController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/&#123;userSeq&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title">findUser</span><span class="params">(@PathVariable Long userSeq)</span> </span>&#123;</span><br><span class="line">        User user = userService.findUserByUserSeq(userSeq);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok().body(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title">createUser</span><span class="params">(@RequestBody User.Create createUser)</span> </span>&#123;</span><br><span class="line">        User user = userService.createUser(createUser);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok().body(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/&#123;userSeq&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title">modifyUser</span><span class="params">(@PathVariable Long userSeq, @RequestBody User.Modify modify)</span> </span>&#123;</span><br><span class="line">        User user = userService.modifyUser(userSeq, modify);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok().body(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/&#123;userSeq&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">deleteUser</span><span class="params">(@PathVariable Long userSeq)</span> </span>&#123;</span><br><span class="line">        userService.deleteUser(userSeq);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="UserController-Test-Code"><a href="#UserController-Test-Code" class="headerlink" title="UserController Test Code"></a>UserController Test Code</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExtendWith</span>(&#123;RestDocumentationExtension<span class="class">.<span class="keyword">class</span>, <span class="title">SpringExtension</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">WebMvcTest</span>(<span class="title">UserController</span>.<span class="title">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">AutoConfigureRestDocs</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">UserControllerTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MockMvc mockMvc;</span><br><span class="line">    <span class="meta">@MockBean</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">findUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// given</span></span><br><span class="line">        given(userService.findUserByUserSeq(<span class="number">1L</span>)).willReturn(User.of(<span class="number">1L</span>, <span class="string">"thinkub"</span>, <span class="string">"Ming"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// when</span></span><br><span class="line">        ResultActions resultActions = mockMvc.perform(RestDocumentationRequestBuilders.get(<span class="string">"/user/&#123;userSeq&#125;"</span>, <span class="number">1L</span>)</span><br><span class="line">                .accept(MediaType.APPLICATION_JSON_VALUE))</span><br><span class="line">                .andDo(MockMvcResultHandlers.print());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// then</span></span><br><span class="line">        resultActions.andExpect(status().isOk())</span><br><span class="line">                .andDo(document(</span><br><span class="line">                        <span class="string">"findUser"</span>,</span><br><span class="line">                        getDocumentRequest(),</span><br><span class="line">                        getDocumentResponse(),</span><br><span class="line">                        pathParameters(parameterWithName(<span class="string">"userSeq"</span>).description(<span class="string">"사용자 시퀀스"</span>)),</span><br><span class="line">                        responseFields(</span><br><span class="line">                                fieldWithPath(<span class="string">"userSeq"</span>).type(JsonFieldType.NUMBER).description(<span class="string">"사용자 시퀀스"</span>),</span><br><span class="line">                                fieldWithPath(<span class="string">"userId"</span>).type(JsonFieldType.STRING).description(<span class="string">"아이디"</span>),</span><br><span class="line">                                fieldWithPath(<span class="string">"userName"</span>).type(JsonFieldType.STRING).description(<span class="string">"이름"</span>)</span><br><span class="line">                        )</span><br><span class="line">                ));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// given</span></span><br><span class="line">        User.Create create = User.Create.of(<span class="string">"thinkub"</span>, <span class="string">"Ming"</span>);</span><br><span class="line">        given(userService.createUser(any())).willReturn(User.of(<span class="number">1L</span>, <span class="string">"thinkub"</span>, <span class="string">"Ming"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// when</span></span><br><span class="line">        ResultActions resultActions = mockMvc.perform(RestDocumentationRequestBuilders.post(<span class="string">"/user"</span>)</span><br><span class="line">                .accept(MediaType.APPLICATION_JSON_VALUE)</span><br><span class="line">                .contentType(MediaType.APPLICATION_JSON_VALUE)</span><br><span class="line">                .content(objectMapper.writeValueAsString(create)))</span><br><span class="line">                .andDo(MockMvcResultHandlers.print());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// then</span></span><br><span class="line">        resultActions.andExpect(status().isOk())</span><br><span class="line">                .andDo(document(</span><br><span class="line">                        <span class="string">"createUser"</span>,</span><br><span class="line">                        getDocumentRequest(),</span><br><span class="line">                        getDocumentResponse(),</span><br><span class="line">                        requestFields(</span><br><span class="line">                                fieldWithPath(<span class="string">"userId"</span>).type(JsonFieldType.STRING).description(<span class="string">"아이디"</span>),</span><br><span class="line">                                fieldWithPath(<span class="string">"userName"</span>).type(JsonFieldType.STRING).description(<span class="string">"이름"</span>).optional()</span><br><span class="line">                        ),</span><br><span class="line">                        responseFields(</span><br><span class="line">                                fieldWithPath(<span class="string">"userSeq"</span>).type(JsonFieldType.NUMBER).description(<span class="string">"사용자 시퀀스"</span>),</span><br><span class="line">                                fieldWithPath(<span class="string">"userId"</span>).type(JsonFieldType.STRING).description(<span class="string">"아이디"</span>),</span><br><span class="line">                                fieldWithPath(<span class="string">"userName"</span>).type(JsonFieldType.STRING).description(<span class="string">"이름"</span>)</span><br><span class="line">                        )</span><br><span class="line">                ));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">modifyUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// given</span></span><br><span class="line">        User.Modify modify = User.Modify.of(<span class="string">"thinkub-new"</span>, <span class="string">"Ming-new"</span>);</span><br><span class="line">        User user = User.of(<span class="number">1L</span>, <span class="string">"thinkub-new"</span>, <span class="string">"Ming-new"</span>);</span><br><span class="line">        given(userService.modifyUser(eq(<span class="number">1L</span>), any())).willReturn(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// when</span></span><br><span class="line">        ResultActions resultActions = mockMvc.perform(RestDocumentationRequestBuilders.put(<span class="string">"/user/&#123;userSeq&#125;"</span>, <span class="number">1L</span>)</span><br><span class="line">                .accept(MediaType.APPLICATION_JSON)</span><br><span class="line">                .contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">                .content(objectMapper.writeValueAsString(modify)))</span><br><span class="line">                .andDo(MockMvcResultHandlers.print());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// then</span></span><br><span class="line">        resultActions.andExpect(status().isOk())</span><br><span class="line">                .andDo(document(</span><br><span class="line">                        <span class="string">"modifyUser"</span>,</span><br><span class="line">                        getDocumentRequest(),</span><br><span class="line">                        getDocumentResponse(),</span><br><span class="line">                        pathParameters(parameterWithName(<span class="string">"userSeq"</span>).description(<span class="string">"사용자 시퀀스"</span>)),</span><br><span class="line">                        requestFields(</span><br><span class="line">                                fieldWithPath(<span class="string">"userId"</span>).type(JsonFieldType.STRING).description(<span class="string">"아이디"</span>).optional(),</span><br><span class="line">                                fieldWithPath(<span class="string">"userName"</span>).type(JsonFieldType.STRING).description(<span class="string">"이름"</span>).optional()</span><br><span class="line">                        ),</span><br><span class="line">                        responseFields(</span><br><span class="line">                                fieldWithPath(<span class="string">"userSeq"</span>).type(JsonFieldType.NUMBER).description(<span class="string">"사용자 시퀀스"</span>),</span><br><span class="line">                                fieldWithPath(<span class="string">"userId"</span>).type(JsonFieldType.STRING).description(<span class="string">"아이디"</span>),</span><br><span class="line">                                fieldWithPath(<span class="string">"userName"</span>).type(JsonFieldType.STRING).description(<span class="string">"이름"</span>)</span><br><span class="line">                        )</span><br><span class="line">                ));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// given</span></span><br><span class="line">        doNothing().when(userService).deleteUser(<span class="number">1L</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// when</span></span><br><span class="line">        ResultActions resultActions = mockMvc.perform(RestDocumentationRequestBuilders.delete(<span class="string">"/user/&#123;userSeq&#125;"</span>, <span class="number">1L</span>)</span><br><span class="line">                .accept(MediaType.APPLICATION_JSON_VALUE))</span><br><span class="line">                .andDo(MockMvcResultHandlers.print());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// then</span></span><br><span class="line">        resultActions.andExpect(status().isOk())</span><br><span class="line">                .andDo(document(</span><br><span class="line">                        <span class="string">"deleteUser"</span>,</span><br><span class="line">                        getDocumentRequest(),</span><br><span class="line">                        getDocumentResponse(),</span><br><span class="line">                        pathParameters(parameterWithName(<span class="string">"userSeq"</span>).description(<span class="string">"사용자 시퀀스"</span>))</span><br><span class="line">                ));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a href="https://docs.spring.io/spring-restdocs/docs/current/reference/html5/" target="_blank" rel="noopener">https://docs.spring.io/spring-restdocs/docs/current/reference/html5/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/09/24/Spring%20Rest%20Doc/" data-id="ckrdkv816000x9d2ab4vudeal" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/07/21/%EC%97%98%EB%A0%88%EA%B0%95%ED%8A%B8%20%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8%201-1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          엘레강트 오브젝트 1-1
        
      </div>
    </a>
  
  
    <a href="/2020/09/14/JPA%20Cascade/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">JPA Cascade</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/21/%EC%97%98%EB%A0%88%EA%B0%95%ED%8A%B8%20%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8%201-1/">엘레강트 오브젝트 1-1</a>
          </li>
        
          <li>
            <a href="/2020/09/24/Spring%20Rest%20Doc/">Spring Rest Doc</a>
          </li>
        
          <li>
            <a href="/2020/09/14/JPA%20Cascade/">JPA Cascade</a>
          </li>
        
          <li>
            <a href="/2020/09/08/JPA%20Entity%20LifeCycle/">JPA Entity LifeCycle</a>
          </li>
        
          <li>
            <a href="/2020/09/07/Java14%20Releases%20notes/">Java14 Releases notes</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Ming<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>