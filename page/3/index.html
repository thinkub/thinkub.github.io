<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>개인 저장소</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="개인 저장소">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="개인 저장소">
<meta property="og:locale">
<meta property="article:author" content="Ming">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="개인 저장소" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">개인 저장소</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Container Orchestration - 1. Container Orchestration" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" class="article-date">
  <time datetime="2020-02-25T23:49:25.844Z" itemprop="datePublished">2020-02-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/">Container Orchestration - 1. Container Orchestration</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="목표"><a href="#목표" class="headerlink" title="목표"></a>목표</h1><p>지금까지 Docker에 대해 가볍게 알아봤습니다.<br>Docker는 결국 Container를 사용하기 위한 기술입니다.<br>Cloud Server 혹은 물리서버에 Container를 통한 격리된 Application 환경 구축을 하다보면 Container를 관리해야 하는 관리 Point가 발생합니다. </p>
<p><strong>Container Orchestration</strong> 이란 Container들을 관리하는 것을 말합니다.</p>
<h1 id="Container-Orchestration-이-하는일"><a href="#Container-Orchestration-이-하는일" class="headerlink" title="Container Orchestration 이 하는일"></a>Container Orchestration 이 하는일</h1><ul>
<li>컨테이너형 애플리케이션의 배포</li>
<li>컨테이너 그룹에 대한 로드밸런싱</li>
<li>스케일링/오토스케일링</li>
<li>컨테이너 장애 복구</li>
<li>컨테이너 그룹간 격리/연결</li>
<li>외부로 서비스 노출</li>
<li>서비스 디스커버리</li>
<li>로그 수집 집중화/자동화</li>
<li>모니터링 집중화/자동화</li>
</ul>
<h1 id="Container-Orchestration-Tool"><a href="#Container-Orchestration-Tool" class="headerlink" title="Container Orchestration Tool"></a>Container Orchestration Tool</h1><p>컨테이너 오케스트레이션 툴로 가장 많이 사용되는건 아래와 같습니다.</p>
<ul>
<li>Docker Swarm</li>
<li>Kubernetes (줄여서 k8s)</li>
<li>Apache MESOS</li>
</ul>
<p><img src="/img/2020/02/26/1.png" alt="image01"></p>
<h2 id="Docker-Swarm"><a href="#Docker-Swarm" class="headerlink" title="Docker Swarm"></a>Docker Swarm</h2><p><a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener">https://docs.docker.com/engine/swarm/</a><br>Docker Swarm은 최초 Docker와 별개로 개발되었으나 Docker 1.12버전부터 Docker Swarm모드로 Docker에 포함되었습니다<br>Swarm은 컨테이너 자체의 능력을 넘어서서 컨테이너화 된 응용 프로그램의 확장, 네트워킹, 보안 유지 및 유지 관리를위한 많은 도구를 제공합니다.</p>
<h2 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h2><p><a href="https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/" target="_blank" rel="noopener">https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/</a><br>쿠버네티스는 구글에서 개발한 2014년 오픈소스화 된 프로젝트입니다.<br>15년에 걸친 구글의 대규모 운영 워크로드 운영 경험과 노하우가 축적된 프로젝트로 컨테이너 중심의 관리환경을 제공합니다.</p>
<h2 id="Apache-MESOS"><a href="#Apache-MESOS" class="headerlink" title="Apache MESOS"></a>Apache MESOS</h2><p><a href="http://mesos.apache.org/documentation/latest/" target="_blank" rel="noopener">http://mesos.apache.org/documentation/latest/</a><br>아파치 메소스는 Twitter, Apple, Uber, Netflix 등 대형 서비스를 운영하고 있는 기업에서 다수 채택 되었으며 마이크로서비스와 빅데이터, 실시간 분석, 엘라스틱 스케일링 기능 등을 제공하고 있습니다.</p>
<table>
<thead>
<tr>
<th>Docker Swarm</th>
<th>Kubernetes</th>
<th>Apache Mesos</th>
</tr>
</thead>
<tbody><tr>
<td>- 중소형 프로젝트일 경우<br>  - 관리할 노드가 적고 많은 기능이 필요하지 않을때</td>
<td>- 대형 프로젝트일 경우<br> - 세밀하고 다양한 설정이 필요때</td>
<td>- 대형 프로젝트일 경우<br> - 검증된 오케스트레이션 툴을 찾고있때</td>
</tr>
</tbody></table>
<h1 id="어떤걸-선택해야-할까"><a href="#어떤걸-선택해야-할까" class="headerlink" title="어떤걸 선택해야 할까?"></a>어떤걸 선택해야 할까?</h1><p><strong><code>당연히 목적에 맞게 선택해야 합니다.</code></strong><br>단, 그래도 선택이 어려울땐 많이 사용되는걸 따라가면 됩니다. <strong>갓구글을 따라 쿠버네티스에 대해 알아보겠습니다.</strong></p>
<p><img src="/img/2020/02/26/2.png" alt="image02"><br><img src="/img/2020/02/26/3.png" alt=""></p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://team-platform.tistory.com/48?category=829379" target="_blank" rel="noopener">https://team-platform.tistory.com/48?category=829379</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" data-id="ckrdkv80b00029d2afuql8vim" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 8. Image 저장소" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%208.%20Image%20%EC%A0%80%EC%9E%A5%EC%86%8C/" class="article-date">
  <time datetime="2020-02-25T06:55:57.810Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%208.%20Image%20%EC%A0%80%EC%9E%A5%EC%86%8C/">Docker - 8. Image 저장소</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="목표"><a href="#목표" class="headerlink" title="목표"></a>목표</h1><p>지금까지 Docker에 대한 개념과 Container 구동방법 그리고 Image를 만드는 방법등을 살펴봤습니다.<br>이번엔 생성한 Image를 저장하고 저장된 Image를 원격에서 Pull받아서 사용할 수 있는 저장소에 대해 알아보겠습니다.</p>
<ol>
<li>Docker Hub</li>
<li>GitLab Container Registry</li>
<li>Docker Registry</li>
</ol>
<p><strong>여기서는 Docker Hub 와 GitLab Container Registry 에 대해 알아보겠습니다.</strong><br><strong>참고로 저희는 GitLab Container Registry 사용하는 방향으로 셋팅중 입니다.</strong></p>
<h1 id="1-Docker-Hub"><a href="#1-Docker-Hub" class="headerlink" title="1. Docker Hub"></a>1. Docker Hub</h1><p>Docker Hub는 컨테이너 이미지를위한 세계 최대의 라이브러리 및 커뮤니티입니다.<br>Docker에서 공식으로 지원하는 Repositry로 공개 Image저장소 이기도 합니다.<br>물론 약간(?) 의 비용을 지불하면 private Repository를 사용 할 수 있습니다.<br>Docker Hub에서 private Repository를 만들어 보겠습니다.</p>
<h3 id="1-1-Repository-생성"><a href="#1-1-Repository-생성" class="headerlink" title="1.1 Repository 생성"></a>1.1 Repository 생성</h3><ul>
<li>Repository 명칭을 적습니다. (broker-api로 하겠습니다.)</li>
<li>Repository 는 Private으로 생성하겠습니다.</li>
<li>Autobuild 가 지원이 됩니다. (GitHub, Bitbucket)<ul>
<li>GitHub과 Bitbucket를 사용하기 않기 때문에 다루지 않겠습니다.</li>
</ul>
</li>
</ul>
<p><img src="/img/2020/02/25/48.png" alt="image48"></p>
<p><strong>정상적으로 Repository 가 생성된 것을 확인 할 수 있습니다.</strong></p>
<p><img src="/img/2020/02/25/49.png" alt="image49"></p>
<h3 id="1-2-Image-Push"><a href="#1-2-Image-Push" class="headerlink" title="1.2 Image Push"></a>1.2 Image Push</h3><ul>
<li><p>생성된 Docker Hub Repository 에 Image Push를 해보겠습니다.</p>
<ul>
<li>docker login 명령어로 docker hub 계정로그인을 진행합니다.</li>
<li>docker pull 명령어로 생성된 이미지를 docker hub에 pull 합니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker login</span><br><span class="line">sudo docker push thinkub/broker-api:0.0.1</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/50.png" alt="image50"></li>
</ul>
</li>
<li><p>정상적으로 pull이 되었는지 확인해봅니다.</p>
</li>
</ul>
<p><img src="/img/2020/02/25/51.png" alt="image51"></p>
<h3 id="1-3-Image-pull"><a href="#1-3-Image-pull" class="headerlink" title="1.3 Image pull"></a>1.3 Image pull</h3><ul>
<li>Docker Hub Repository에 있는 Image를 pull 받아보겠습니다.</li>
<li><code>생성한 Repository 는 private Repository이기 때문에 docker login 이후에 pull을 받을 수 있습니다.</code></li>
</ul>
<p><img src="/img/2020/02/25/52.png" alt="image52"></p>
<h1 id="2-GitLab-Container-Registry"><a href="#2-GitLab-Container-Registry" class="headerlink" title="2. GitLab Container Registry"></a>2. GitLab Container Registry</h1><p>GitLab에서도 <strong>Container Registry</strong>라는 Docker Image 저장소를 제공하고 있습니다.<br>GitLab 설치시 Default 설정이 되지 않으므로 활성화를 해야 합니다.<br>관련 문서는 <a href="https://docs.gitlab.com/ce/administration/packages/container_registry.html" target="_blank" rel="noopener">이곳</a> 을 참고해주세요.</p>
<p><code>컨테이너 레지스트리는 기본적으로 HTTPS에서 작동합니다. HTTPS 설정을 선행한 후 진행해주세요</code><br><code>해당 문서는 gitlab이 이미 설치된 상태에서의 작업입니다.</code></p>
<h3 id="2-1-Registry-Container-활성화"><a href="#2-1-Registry-Container-활성화" class="headerlink" title="2.1 Registry Container 활성화"></a>2.1 Registry Container 활성화</h3><ul>
<li><p>/etc/gitlab/gitlab.rb 설정파일을 수정합니다.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># registry 에서 사용하는 주소로 gitlab주소에서 8929 Port를 사용하도록 설정</span></span><br><span class="line"><span class="comment"># port는 필요에의해서 변경 할 수 있음.</span></span><br><span class="line">registry_external_url <span class="string">'https://....:8929'</span></span><br><span class="line"></span><br><span class="line">gitlab_rails[<span class="string">'registry_enabled'</span>] = <span class="literal">true</span></span><br><span class="line">gitlab_rails[<span class="string">'registry_path'</span>] = <span class="string">"/var/opt/gitlab/gitlab-rails/shared/registry"</span></span><br><span class="line"></span><br><span class="line">registry[<span class="string">'enable'</span>] = <span class="literal">true</span></span><br><span class="line">registry[<span class="string">'registry_http_addr'</span>] = <span class="string">"localhost:5001"</span></span><br><span class="line"></span><br><span class="line">registry_nginx[<span class="string">'ssl_certificate'</span>] = <span class="string">"/etc/gitlab/ssl/Wildcard.ziny.us.crt"</span></span><br><span class="line">registry_nginx[<span class="string">'ssl_certificate_key'</span>] = <span class="string">"/etc/gitlab/ssl/Wildcard.ziny.us.key"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>gitlab 재설정</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure>
</li>
<li><p>Container Registry 접속 확인</p>
</li>
</ul>
<p><img src="/img/2020/02/25/53.png" alt="image53"></p>
<h3 id="2-2-Container-Registry-접근"><a href="#2-2-Container-Registry-접근" class="headerlink" title="2.2 Container Registry 접근"></a>2.2 Container Registry 접근</h3><p>활성화 된 Registry 에 접근해 보겠습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker login [url]:[port]</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/02/25/54.png" alt="image54"><br><code>certificate signed by unknown authority</code> 라는 오류가 발생합니다.</p>
<p><strong>Docker hostname을 port와 같이 사용하는경우 어떤 인증서를 사용해야할지 추측하지 않습니다.</strong><br><strong>이를 위해서 <code>/etc/docker/certs.d/{hostname:port}/</code> 폴더를 생성한 후 해당 폴더에 인증서를 저장해두어야 합니다.</strong></p>
<h4 id="gitlab인증서를-복사합니다"><a href="#gitlab인증서를-복사합니다" class="headerlink" title="gitlab인증서를 복사합니다."></a>gitlab인증서를 복사합니다.</h4><p><img src="/img/2020/02/25/55.png" alt="image55"></p>
<h4 id="gitlab-container-registry-login-해봅니다"><a href="#gitlab-container-registry-login-해봅니다" class="headerlink" title="gitlab container registry login 해봅니다."></a>gitlab container registry login 해봅니다.</h4><p><img src="/img/2020/02/25/56.png" alt="image56"></p>
<h3 id="2-3-Container-Registry-에-Image-push-해보기"><a href="#2-3-Container-Registry-에-Image-push-해보기" class="headerlink" title="2.3 Container Registry 에 Image push 해보기"></a>2.3 Container Registry 에 Image push 해보기</h3><ul>
<li>기존에 생성된 broker-api 를 push 해볼 예정입니다.</li>
<li>container registry project 에 맞게 tag 작업을 합니다. (tag 규칙은 아래와 같습니다)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[HOST_NAME]/[PROJECT_NAME]:[TAG] 또는</span><br><span class="line">[HOST_NAME]/[GROUP_NAME]/[PROJECT_NAME]:[TAG]</span><br><span class="line"></span><br><span class="line">ex) </span><br><span class="line">sudo docker tag broker-api [url]:[port]/ai-labs-aip/broker-api:0.0.1</span><br></pre></td></tr></table></figure></li>
<li>push 명령어는 다음과 같습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push [url]:[port]/ai-labs-aip/broker-api</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="/img/2020/02/25/57.png" alt="image57"></p>
<ul>
<li>정상적으로 Push 된지 확인해 봅니다.</li>
</ul>
<p><img src="/img/2020/02/25/58.png" alt="image58"></p>
<h3 id="2-4-Container-Registry에서-Image-Pull-받아서-Container-구동해보기"><a href="#2-4-Container-Registry에서-Image-Pull-받아서-Container-구동해보기" class="headerlink" title="2.4 Container Registry에서 Image Pull 받아서 Container 구동해보기"></a>2.4 Container Registry에서 Image Pull 받아서 Container 구동해보기</h3><ul>
<li>Container Registry 에서 Image 를 받아보겠습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull [url]:[port]/ai-labs-aip/broker-api:0.0.1</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="/img/2020/02/25/59.png" alt="image59"></p>
<ul>
<li>Pull 받은 Image로 Container를 구동해보겠습니다.</li>
</ul>
<p><img src="/img/2020/02/25/60.png" alt="image60"></p>
<ul>
<li>접속 확인</li>
</ul>
<p><img src="/img/2020/02/25/61.png" alt="image61"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%208.%20Image%20%EC%A0%80%EC%9E%A5%EC%86%8C/" data-id="ckrdkv80k000a9d2a3qr1ht60" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 7. Docker Compose" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%207.%20Docker%20Compose/" class="article-date">
  <time datetime="2020-02-25T06:51:32.639Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%207.%20Docker%20Compose/">Docker - 7. Docker Compose</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h1><p>Docker Compose는 <strong>다중 Container Application을 정의하고 실행하기 위한 도구</strong>입니다.<br>YAML파일을 사용하여 Application 서비스를 구성합니다.<br>예를 들어 Application 을 구동하기 위해 DB 설치를 하고, Application 구동 해야 한다면<br>DB 용 Container를 구성하고 Application용 Container를 구성해야 합니다. 이러한 구성을 Compose를 이용한다면<br>YAML로 작성된 설정파일 1개로 구성이 가능합니다.</p>
<p>Compose는 3단계 프로세스가 작동합니다.</p>
<ol>
<li>Dockerfile로 환경을 정의함</li>
<li>docker-compose.yml에서 앱을 구성하는 서비스를 정의하여 격리된 환경에서 함께 실행 될 수 있도록 함.</li>
<li>docker-compose up을 실행하면 Compose가 전체 앱을 시작하고 실행</li>
</ol>
<p>관련 문서는 <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener">여기</a>를 참고해주세요</p>
<h1 id="1-Docker-Compose-설치"><a href="#1-Docker-Compose-설치" class="headerlink" title="1.Docker Compose 설치"></a>1.Docker Compose 설치</h1><p>간단하게 아래 명령어로 설치가 가능합니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L <span class="string">"https://github.com/docker/compose/releases/download/1.25.0/docker-compose-<span class="variable">$(uname -s)</span>-<span class="variable">$(uname -m)</span>"</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">sudo ln -s /usr/<span class="built_in">local</span>/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p><img src="/img/2020/02/25/44.png" alt="image44"></p>
<h1 id="2-Docker-Compose로-Container구동하기"><a href="#2-Docker-Compose로-Container구동하기" class="headerlink" title="2.Docker Compose로 Container구동하기"></a>2.Docker Compose로 Container구동하기</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">이번에 진행할 Sample 역시 broker-api 입니다.</span><br><span class="line">broker-api개발시 vision연동 데이터를 저장히가 위해 mongo-db 를 설치 했었습니다.</span><br><span class="line">docker-compose로 mongodb 와 broker-api 를 container구동해보도록 하겠습니다.</span><br></pre></td></tr></table></figure>

<h3 id="2-1-yaml-파일을-작성"><a href="#2-1-yaml-파일을-작성" class="headerlink" title="2-1. yaml 파일을 작성"></a>2-1. yaml 파일을 작성</h3><ul>
<li>version : docker compose 버전을 작성, 버전에 따라 지원하는 옵션이 달라집니다(관련 내용은 <a href="https://docs.docker.com/compose/compose-file/compose-versioning/" target="_blank" rel="noopener">공식문서</a> 참고)</li>
<li>services: container들을 정의합니다.</li>
<li>image: docker image를 적습니다. local에 있는 image라면 local image를 사용하고 없는 image라면 docker hub의 공식 이미지를 다운받아집니다.</li>
<li>restart: 서버 재시작시 container의 자동재시작 여부</li>
<li>port: docker run 명령의 -p 옵션</li>
<li>volumes: docker run 명령의 -v 옵션</li>
<li>container_name: 실행하는 container 명칭</li>
<li>environment: 환경변수<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.2"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">'broker-api2'</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'18080:18080'</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'/home/ces/logs:/home/thinkub0219/log'</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">"broker-api2"</span></span><br><span class="line">  <span class="attr">mongodb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">'mongo'</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MONGO_INITDB_DATABASE:</span> <span class="string">vision</span></span><br><span class="line">      <span class="attr">MONGO_INITDB_ROOT_USERNAME:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">MONGO_INITDB_ROOT_PASSWORD:</span> <span class="string">P@ssw0rd</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'./db:/home/thinkub0219/db'</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">"mongodb"</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"27017:27017"</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-2-docker-compose-실행"><a href="#2-2-docker-compose-실행" class="headerlink" title="2.2 docker compose 실행"></a>2.2 docker compose 실행</h3><p>docker compose를 실행하게되면 yaml파일에 정의된 내용이 실행이 됩니다.<br>container 까지 실행이 됩니다.<br><code>docker-compose.yml 파일이 있는 경로에서 실행해야 합니다.</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure>

<p><img src="/img/2020/02/25/45.png" alt="image45"></p>
<h1 id="3-작동확인"><a href="#3-작동확인" class="headerlink" title="3. 작동확인"></a>3. 작동확인</h1><ul>
<li>broker-api</li>
</ul>
<p><img src="/img/2020/02/25/46.png" alt="image46"></p>
<ul>
<li>mongodb</li>
</ul>
<p><img src="/img/2020/02/25/47.png" alt="image47"></p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://www.docker.com" target="_blank" rel="noopener">https://www.docker.com</a><br><a href="http://pyrasis.com/book/DockerForTheReallyImpatient" target="_blank" rel="noopener">http://pyrasis.com/book/DockerForTheReallyImpatient</a><br><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose" target="_blank" rel="noopener">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose</a><br><a href="https://tech.osci.kr/docker/2018/09/10/45749387/" target="_blank" rel="noopener">https://tech.osci.kr/docker/2018/09/10/45749387/</a><br><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%207.%20Docker%20Compose/" data-id="ckrdkv80m000c9d2a70lm5uw8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 6. Dockerfile" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%206.%20Dockerfile/" class="article-date">
  <time datetime="2020-02-25T06:37:25.066Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%206.%20Dockerfile/">Docker - 6. Dockerfile</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="Dockerfile-기본명령어"><a href="#Dockerfile-기본명령어" class="headerlink" title="Dockerfile 기본명령어"></a>Dockerfile 기본명령어</h1><blockquote>
<p>Dockerfile은 Docker Image를 생성하기위해 DSL언어로 구성된 파일입니다.</p>
</blockquote>
<p>Dockerfile 관련 reference 문서는 <a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener">이곳</a> 을 참고하시면 됩니다.</p>
<h3 id="From"><a href="#From" class="headerlink" title="From"></a>From</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM &lt;image&gt;:&lt;tag&gt;</span><br><span class="line">FROM centos:centos7.7.1908</span><br></pre></td></tr></table></figure>
<p>Base Image를 지정합니다. <code>필수값</code>으로 어떤 Image도 Base Image가 될 수 있습니다.<br>tag는 될 수 있으면 기본값(lastest) 보다 구체적인 버전을 지정하는것이 좋습니다.</p>
<h3 id="MAINTAINER"><a href="#MAINTAINER" class="headerlink" title="MAINTAINER"></a>MAINTAINER</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MAINTAINER &lt;name&gt;</span><br><span class="line">MAINTAINER mhlee@saltlux.com</span><br></pre></td></tr></table></figure>
<p>파일 관리자의 이름 또는 Email정보를 적습니다. </p>
<h3 id="COPY"><a href="#COPY" class="headerlink" title="COPY"></a>COPY</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COPY &lt;src&gt;... &lt;dest&gt;</span><br><span class="line">COPY . /usr/src/app</span><br></pre></td></tr></table></figure>
<p>파일이나 디렉토리를 이미지로 복사합니다.<br>일반적으로 소스를 복사하는 데 사용합니다.<br><code>target</code> 디렉토리가 없다면 자동으로 생성합니다.</p>
<h3 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ADD &lt;src&gt;... &lt;dest&gt;</span><br><span class="line">ADD . /usr/src/app</span><br></pre></td></tr></table></figure>
<p>COPY명령어와 매우 유사하나 몇가지 추가 기능이 있습니다.<br>src에 파일 대신 URL을 입력할 수 있고 src에 압축 파일을 입력하는 경우 자동으로 압축을 해제하면서 복사됩니다.</p>
<h3 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUN &lt;command&gt;</span><br><span class="line">RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</span><br><span class="line">RUN bundle install</span><br></pre></td></tr></table></figure>
<p>가장 많이 사용하는 구문입니다. 명령어를 그대로 실행합니다.<br>내부적으로 /bin/sh -c 뒤에 명령어를 실행하는 방식입니다.</p>
<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</span><br><span class="line">CMD command param1 param2</span><br><span class="line">CMD bundle exec ruby app.rb</span><br></pre></td></tr></table></figure>
<p>도커 컨테이너가 실행되었을 때 실행되는 명령어를 정의합니다.<br>빌드할 때는 실행되지 않으며 여러 개의 CMD가 존재할 경우 가장 마지막 CMD만 실행됩니다.<br>한꺼번에 여러 개의 프로그램을 실행하고 싶은 경우에는 run.sh파일을 작성하여 데몬으로 실행하거나 supervisord나 forego와 같은 여러 개의 프로그램을 실행하는 프로그램을 사용합니다.</p>
<h3 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a>WORKDIR</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WORKDIR /path/to/workdir</span><br></pre></td></tr></table></figure>
<p>RUN, CMD, ADD, COPY등이 이루어질 기본 디렉토리를 설정합니다.<br>각 명령어의 현재 디렉토리는 한 줄 한 줄마다 초기화되기 때문에 RUN cd /path를 하더라도 다음 명령어에선 다시 위치가 초기화 됩니다.<br>같은 디렉토리에서 계속 작업하기 위해서 WORKDIR을 사용합니다.</p>
<h3 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPOSE &lt;port&gt; [&lt;port&gt;...]</span><br><span class="line">EXPOSE 4567</span><br></pre></td></tr></table></figure>
<p>도커 컨테이너가 실행되었을 때 요청을 기다리고 있는(Listen) 포트를 지정합니다. 여러개의 포트를 지정할 수 있습니다.</p>
<h3 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VOLUME [&quot;/data&quot;]</span><br></pre></td></tr></table></figure>
<p>컨테이너 외부에 파일시스템을 마운트 할 때 사용합니다. 반드시 지정하지 않아도 마운트 할 수 있지만, 기본적으로 지정하는 것이 좋습니다.</p>
<h3 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ENV &lt;key&gt; &lt;value&gt;</span><br><span class="line">ENV &lt;key&gt;=&lt;value&gt; ...</span><br><span class="line">ENV DB_URL mysql</span><br></pre></td></tr></table></figure>
<p>컨테이너에서 사용할 환경변수를 지정합니다. 컨테이너를 실행할 때 -e옵션을 사용하면 기존 값을 오버라이딩 하게 됩니다.</p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://www.docker.com" target="_blank" rel="noopener">https://www.docker.com</a><br><a href="http://pyrasis.com/book/DockerForTheReallyImpatient" target="_blank" rel="noopener">http://pyrasis.com/book/DockerForTheReallyImpatient</a><br><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose" target="_blank" rel="noopener">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose</a><br><a href="https://tech.osci.kr/docker/2018/09/10/45749387/" target="_blank" rel="noopener">https://tech.osci.kr/docker/2018/09/10/45749387/</a><br><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%206.%20Dockerfile/" data-id="ckrdkv80n000d9d2aa0ev2m0a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 5. Image 만들기" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%205.%20Image%20%EB%A7%8C%EB%93%A4%EA%B8%B0/" class="article-date">
  <time datetime="2020-02-25T06:24:39.997Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%205.%20Image%20%EB%A7%8C%EB%93%A4%EA%B8%B0/">Docker - 5. Image 만들기</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="목표"><a href="#목표" class="headerlink" title="목표"></a>목표</h1><p>이번엔 Docker Image를 직접 만들어 보도록 하겠습니다.<br>Image를 만드는 방법은 2가지가 있습니다. (제가 아는 바로는)</p>
<ol>
<li><strong>베이스 이미지 (Os만 설치된 Container)를 만들어 놓고 Container에서 필요한 작업을 한 뒤 container commit으로 Image 생성</strong></li>
<li><strong>Dockerfile 을 이용한 Image생성</strong></li>
</ol>
<p>두 가지 케이스 다 실습해보도록 하겠습니다.<br>실습환경은 ces때 진행했던 broker-api 로 하겠습니다. </p>
<p><strong>설치순서</strong></p>
<ul>
<li>CentOS 설치</li>
<li>OpenJdk8 설치</li>
<li>application jar파일 다운로드</li>
<li>application start</li>
</ul>
<h1 id="1-Base-Image-OS-로-Container생성-후-commit-로-Image생성하기"><a href="#1-Base-Image-OS-로-Container생성-후-commit-로-Image생성하기" class="headerlink" title="1. Base Image(OS)로 Container생성 후 commit 로 Image생성하기."></a>1. Base Image(OS)로 Container생성 후 commit 로 Image생성하기.</h1><h3 id="1-1-CentOS-Image를-다운받습니다"><a href="#1-1-CentOS-Image를-다운받습니다" class="headerlink" title="1-1. CentOS Image를 다운받습니다."></a>1-1. CentOS Image를 다운받습니다.</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull centos</span><br></pre></td></tr></table></figure>

<p><img src="/img/2020/02/25/31.png" alt="image31"></p>
<h3 id="1-2-Container-생성하기"><a href="#1-2-Container-생성하기" class="headerlink" title="1-2. Container 생성하기"></a>1-2. Container 생성하기</h3><ul>
<li>-p 옵션으로 application 사용하는 18080포트 연결 목적</li>
<li>-v 옵션으로 application jar 파일 mount 목적<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -itd \</span><br><span class="line">-p 18080:18080 \</span><br><span class="line">-v /home/thinkub0219/webapp:/home/webapp \</span><br><span class="line">--name <span class="string">"centos"</span> centos</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="/img/2020/02/25/32.png" alt="image32"></p>
<h3 id="1-3-Container-들어가기"><a href="#1-3-Container-들어가기" class="headerlink" title="1-3. Container 들어가기"></a>1-3. Container 들어가기</h3><ul>
<li>jdk 가 설치 되지 않은것을 확인 할 수 있습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> -it centos /bin/bash</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="/img/2020/02/25/33.png" alt="image33"></p>
<h3 id="1-4-Container-내부에-OpenJdk8-설치하기"><a href="#1-4-Container-내부에-OpenJdk8-설치하기" class="headerlink" title="1-4. Container 내부에 OpenJdk8 설치하기"></a>1-4. Container 내부에 OpenJdk8 설치하기</h3><ul>
<li>jdk 가 설치 된 것을 확인 할 수 있습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum update -y; \</span><br><span class="line">yum install -y java-1.8.0-openjdk-devel.x86_64; \</span><br><span class="line">easy_install supervisor; \</span><br><span class="line">yum clean all</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/34.png" alt="image34"></li>
</ul>
<h3 id="1-5-application-jar-다운로드"><a href="#1-5-application-jar-다운로드" class="headerlink" title="1-5. application jar 다운로드"></a>1-5. application jar 다운로드</h3><ul>
<li>현재 gitlab 환경이 내부망으로 컴파일 된 jar 파일 upload 처리함</li>
<li>정상 적인 case로는 git clone으로 source code download 후 build 처리하는 것을 추천함.</li>
<li>아래 이미지와 같이 mount 된 volume에 jar파일 upload 하면 docker 에 mount된 경로에서 확인이 가능함.</li>
</ul>
<p><img src="/img/2020/02/25/35.png" alt="image35"></p>
<h3 id="1-6-application-start"><a href="#1-6-application-start" class="headerlink" title="1-6. application start"></a>1-6. application start</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -server -Dspring.profiles.active=dev -jar broker-api.jar &amp;</span><br></pre></td></tr></table></figure>

<p><img src="/img/2020/02/25/36.png" alt="image36"></p>
<h3 id="1-7-application-구동-확인"><a href="#1-7-application-구동-확인" class="headerlink" title="1-7. application 구동 확인"></a>1-7. application 구동 확인</h3><p>정상적으로 구동된 것을 확인 할 수 있습니다.</p>
<p><img src="/img/2020/02/25/37.png" alt="image37"></p>
<h3 id="1-8-image-생성하기"><a href="#1-8-image-생성하기" class="headerlink" title="1-8. image 생성하기"></a>1-8. image 생성하기</h3><p>정상적으로 구동된 것을 확인했으니, 해당 Container 기준으로 Image생성을 해보겠습니다.<br>새로 생성할 Image name 은 broker-api1 로 설정하겠습니다.<br>broker-api1이라는 image가 생성 된것을 확인 할 수 있습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker commit centos broker-api1</span><br></pre></td></tr></table></figure>

<p><img src="/img/2020/02/25/38.png" alt="image38"></p>
<h3 id="1-9-생성된-image로-container-구동하기"><a href="#1-9-생성된-image로-container-구동하기" class="headerlink" title="1-9. 생성된 image로 container 구동하기."></a>1-9. 생성된 image로 container 구동하기.</h3><ul>
<li>기존 생성된 container를 삭제합니다.</li>
<li>생성된 image를 이용해 container를 구동합니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -itd \</span><br><span class="line">-p 18080:18080 \</span><br><span class="line">-v /home/thinkub0219/webapp:/home/webapp \</span><br><span class="line">--name <span class="string">"broker-api1"</span> broker-api1</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="/img/2020/02/25/39.png" alt="image39"></p>
<h3 id="1-10-application-구동확인"><a href="#1-10-application-구동확인" class="headerlink" title="1-10. application 구동확인"></a>1-10. application 구동확인</h3><ul>
<li><code>확인해보면 정상적으로 구동되지 않은 것을 확인 할 수 있습니다.</code></li>
<li>이유는 application start가 되지 않았기 때문입니다. container내부 환경요인은 정상 설치가 되었습니다.</li>
<li>application 구동을 진행하면 정상적으로 사이트 접근이 가능합니다.</li>
</ul>
<h1 id="2-Dockerfile-을-이용한-Image생성"><a href="#2-Dockerfile-을-이용한-Image생성" class="headerlink" title="2. Dockerfile 을 이용한 Image생성"></a>2. Dockerfile 을 이용한 Image생성</h1><p>이번엔 동일한 작업을 Dockerfile을 이용해서 Image생성을 해보겠습니다.<br>위 생성 방식은 나름 복잡(?) 하게 구성된 것에 비해 Dockerfile 생성 방식은 좀더 simple(?) 합니다.<br>Dockerfile에 대한 설명은 다음장에 설명하겠습니다.</p>
<h3 id="2-1-Dockerfile-작성"><a href="#2-1-Dockerfile-작성" class="headerlink" title="2-1. Dockerfile 작성"></a>2-1. Dockerfile 작성</h3><ul>
<li>centos 로 base image 를 지정한다.</li>
<li>작성자는 <a href="mailto:mhlee@saltlux.com" target="_blank" rel="noopener">mhlee@saltlux.com</a> 이다.</li>
<li>JAVA_HOME 환경변수를 지정한다.</li>
<li>openJdk를 설치한다.</li>
<li>source를 copy 한다 <code>(주의점은 container내부는 절대경로 지정이 가능하나 외부경로는 상대경로를 지정해줘야함)</code></li>
<li>port 설정을 한다</li>
<li>container 실행시 실행스크립트를 작성한다.<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"></span><br><span class="line"><span class="keyword">MAINTAINER</span> mhlee@saltlux.com</span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME /usr/lib/jvm/java-openjdk</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install Packages &amp; open jdk 1.9</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum update -y; \</span></span><br><span class="line"><span class="bash">    yum install -y java-1.8.0-openjdk-devel.x86_64; \</span></span><br><span class="line"><span class="bash">    easy_install supervisor; \</span></span><br><span class="line"><span class="bash">    yum clean all</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># source copy</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./webapp /home/webapp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># app start</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">18080</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> java -server -Dspring.profiles.active=dev -jar /home/webapp/broker-api.jar</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-2-Dockerfile-build"><a href="#2-2-Dockerfile-build" class="headerlink" title="2-2. Dockerfile build"></a>2-2. Dockerfile build</h3><p>작성한 Dockerfile을 이용해 Image생성을 해보겠습니다.<br>Dockerfile이 있는 경로에서 아래 명령어로 <code>broker-api2</code> 이라는 image를 생성합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker build -t broker-api2 .</span><br></pre></td></tr></table></figure>

<p><img src="/img/2020/02/25/40.png" alt="image40"></p>
<p>‘broker-api2’라는 Image 가 생성된 것을 확인 할 수 있습니다.<br><img src="/img/2020/02/25/41.png" alt="image41"></p>
<h3 id="2-3-생성된-image로-container-구동하기"><a href="#2-3-생성된-image로-container-구동하기" class="headerlink" title="2-3. 생성된 image로 container 구동하기."></a>2-3. 생성된 image로 container 구동하기.</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -itd \</span><br><span class="line">-p 18080:18080 \</span><br><span class="line">-v /home/thinkub0219/webapp:/home/webapp \</span><br><span class="line">--name <span class="string">"broker-api2"</span> broker-api2</span><br></pre></td></tr></table></figure>

<p><img src="/img/2020/02/25/42.png" alt="image42"></p>
<h3 id="2-4-application-구동확인"><a href="#2-4-application-구동확인" class="headerlink" title="2-4. application 구동확인"></a>2-4. application 구동확인</h3><p>정상적으로 접근되는 것을 확인 할 수 있습니다.</p>
<p><img src="/img/2020/02/25/43.png" alt="image43"></p>
<h1 id="Dockerfile을-사용해야-하는-이유"><a href="#Dockerfile을-사용해야-하는-이유" class="headerlink" title="Dockerfile을 사용해야 하는 이유"></a>Dockerfile을 사용해야 하는 이유</h1><p>2가지 방법을 봤을때 Dockerfile을 사용하는게 좀더 simple(?) 해 보이는건 제 착각 일까요?<br>첫번째 방법으로 Image를 생성한 경우 Image가 삭제 되었을때 Image를 재생성 하는 과정이 Dockerfile에 비해<br>다소 복잡하고 step에 대한 누락이 발생 할 가능성이 있습니다.<br>거기에 반해 Dockerfile을 Git으로 관리하게 되면 Dockerfile 의 변경 History관리가 가능하고 버전 관리가 가능하고<br>Image 재생성 과정이 단순해 집니다.</p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://www.docker.com" target="_blank" rel="noopener">https://www.docker.com</a><br><a href="http://pyrasis.com/book/DockerForTheReallyImpatient" target="_blank" rel="noopener">http://pyrasis.com/book/DockerForTheReallyImpatient</a><br><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose" target="_blank" rel="noopener">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose</a><br><a href="https://tech.osci.kr/docker/2018/09/10/45749387/" target="_blank" rel="noopener">https://tech.osci.kr/docker/2018/09/10/45749387/</a><br><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%205.%20Image%20%EB%A7%8C%EB%93%A4%EA%B8%B0/" data-id="ckrdkv80l000b9d2ahlv352d0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 4. Docker Example" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%204.%20Docker%20Example/" class="article-date">
  <time datetime="2020-02-25T06:19:53.837Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%204.%20Docker%20Example/">Docker - 4. Docker Example</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h1><p><strong>Ubuntu OS위에 Docker를 이용해 CentOS Container 생성</strong></p>
<h3 id="1-docker-hub에서-centOS-Image를-검색해봅니다"><a href="#1-docker-hub에서-centOS-Image를-검색해봅니다" class="headerlink" title="1. docker hub에서 centOS Image를 검색해봅니다."></a>1. docker hub에서 centOS Image를 검색해봅니다.</h3><p><img src="/img/2020/02/25/26.png" alt="image26"></p>
<ul>
<li>centOS Image 다운로드 해서 사용하는 방법이 잘 설명되어있습니다. <a href="https://hub.docker.com/_/centos" target="_blank" rel="noopener">Site</a></li>
</ul>
<p><img src="/img/2020/02/25/27.png" alt="image27"></p>
<h3 id="2-centOS-Image-를-다운받습니다"><a href="#2-centOS-Image-를-다운받습니다" class="headerlink" title="2. centOS Image 를 다운받습니다."></a>2. centOS Image 를 다운받습니다.</h3><ul>
<li>centOS Docker Images 가 다운로드 된 것을 확인 할 수 있습니다.</li>
<li>images 목록을 확인하는 명령어는 다음과 같습니다.</li>
</ul>
<p><img src="/img/2020/02/25/28.png" alt="image28"></p>
<h3 id="3-centOS-Image를-이용해-Docker-Container-를-생성-실행-시킵니다"><a href="#3-centOS-Image를-이용해-Docker-Container-를-생성-실행-시킵니다" class="headerlink" title="3. centOS Image를 이용해 Docker Container 를 생성(실행) 시킵니다."></a>3. centOS Image를 이용해 Docker Container 를 생성(실행) 시킵니다.</h3><ul>
<li>Container 를 조회하는 명령어는 다음과 같습니다.</li>
</ul>
<p><img src="/img/2020/02/25/29.png" alt="image29"></p>
<h3 id="4-Ubuntu-OS에-Docker를-이용해서-CentOS-Container가-잘-설치-되어있는지-확인해보겠습니다"><a href="#4-Ubuntu-OS에-Docker를-이용해서-CentOS-Container가-잘-설치-되어있는지-확인해보겠습니다" class="headerlink" title="4. Ubuntu OS에 Docker를 이용해서 CentOS Container가 잘 설치 되어있는지 확인해보겠습니다."></a>4. Ubuntu OS에 Docker를 이용해서 CentOS Container가 잘 설치 되어있는지 확인해보겠습니다.</h3><ul>
<li>Container 에 접속하는 명령어는 다음과 같습니다.</li>
</ul>
<p><img src="/img/2020/02/25/30.png" alt="image30"></p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://www.docker.com" target="_blank" rel="noopener">https://www.docker.com</a><br><a href="http://pyrasis.com/book/DockerForTheReallyImpatient" target="_blank" rel="noopener">http://pyrasis.com/book/DockerForTheReallyImpatient</a><br><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose" target="_blank" rel="noopener">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose</a><br><a href="https://tech.osci.kr/docker/2018/09/10/45749387/" target="_blank" rel="noopener">https://tech.osci.kr/docker/2018/09/10/45749387/</a><br><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%204.%20Docker%20Example/" data-id="ckrdkv80o000e9d2aam8waumh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 3. Docker Command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%203.%20Docker%20Command/" class="article-date">
  <time datetime="2020-02-25T05:14:13.481Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%203.%20Docker%20Command/">Docker - 3. Docker Command</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="Docker-Command"><a href="#Docker-Command" class="headerlink" title="Docker Command"></a>Docker Command</h1><p>Docker 명령어를 확인해 보겠습니다.<br>기본적으로 Docker의 명령어는 <a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener">사이트</a> 에 상세히 나와있습니다.</p>
<p>Docker에서 제공되는 옵션과 명령 종류를 확인해 보겠습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">thinkub0219@instance-1:~$ sudo docker</span><br><span class="line"></span><br><span class="line">Usage:  docker [OPTIONS] COMMAND</span><br><span class="line"></span><br><span class="line">A self-sufficient runtime for containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --config string      Location of client config files (default &quot;/home/thinkub0219/.docker&quot;)</span><br><span class="line">  -c, --context string     Name of the context to use to connect to the daemon (overrides DOCKER_HOST env var and default context set with</span><br><span class="line">                           &quot;docker context use&quot;)</span><br><span class="line">  -D, --debug              Enable debug mode</span><br><span class="line">  -H, --host list          Daemon socket(s) to connect to</span><br><span class="line">  -l, --log-level string   Set the logging level (&quot;debug&quot;|&quot;info&quot;|&quot;warn&quot;|&quot;error&quot;|&quot;fatal&quot;) (default &quot;info&quot;)</span><br><span class="line">      --tls                Use TLS; implied by --tlsverify</span><br><span class="line">      --tlscacert string   Trust certs signed only by this CA (default &quot;/home/thinkub0219/.docker/ca.pem&quot;)</span><br><span class="line">      --tlscert string     Path to TLS certificate file (default &quot;/home/thinkub0219/.docker/cert.pem&quot;)</span><br><span class="line">      --tlskey string      Path to TLS key file (default &quot;/home/thinkub0219/.docker/key.pem&quot;)</span><br><span class="line">      --tlsverify          Use TLS and verify the remote</span><br><span class="line">  -v, --version            Print version information and quit</span><br><span class="line"></span><br><span class="line">Management Commands:</span><br><span class="line">  builder     Manage builds</span><br><span class="line">  config      Manage Docker configs</span><br><span class="line">  container   Manage containers</span><br><span class="line">  context     Manage contexts</span><br><span class="line">  engine      Manage the docker engine</span><br><span class="line">  image       Manage images</span><br><span class="line">  network     Manage networks</span><br><span class="line">  node        Manage Swarm nodes</span><br><span class="line">  plugin      Manage plugins</span><br><span class="line">  secret      Manage Docker secrets</span><br><span class="line">  service     Manage services</span><br><span class="line">  stack       Manage Docker stacks</span><br><span class="line">  swarm       Manage Swarm</span><br><span class="line">  system      Manage Docker</span><br><span class="line">  trust       Manage trust on Docker images</span><br><span class="line">  volume      Manage volumes</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  attach      Attach local standard input, output, and error streams to a running container</span><br><span class="line">  build       Build an image from a Dockerfile</span><br><span class="line">  commit      Create a new image from a container&apos;s changes</span><br><span class="line">  cp          Copy files/folders between a container and the local filesystem</span><br><span class="line">  create      Create a new container</span><br><span class="line">  diff        Inspect changes to files or directories on a container&apos;s filesystem</span><br><span class="line">  events      Get real time events from the server</span><br><span class="line">  exec        Run a command in a running container</span><br><span class="line">  export      Export a container&apos;s filesystem as a tar archive</span><br><span class="line">  history     Show the history of an image</span><br><span class="line">  images      List images</span><br><span class="line">  import      Import the contents from a tarball to create a filesystem image</span><br><span class="line">  info        Display system-wide information</span><br><span class="line">  inspect     Return low-level information on Docker objects</span><br><span class="line">  kill        Kill one or more running containers</span><br><span class="line">  load        Load an image from a tar archive or STDIN</span><br><span class="line">  login       Log in to a Docker registry</span><br><span class="line">  logout      Log out from a Docker registry</span><br><span class="line">  logs        Fetch the logs of a container</span><br><span class="line">  pause       Pause all processes within one or more containers</span><br><span class="line">  port        List port mappings or a specific mapping for the container</span><br><span class="line">  ps          List containers</span><br><span class="line">  pull        Pull an image or a repository from a registry</span><br><span class="line">  push        Push an image or a repository to a registry</span><br><span class="line">  rename      Rename a container</span><br><span class="line">  restart     Restart one or more containers</span><br><span class="line">  rm          Remove one or more containers</span><br><span class="line">  rmi         Remove one or more images</span><br><span class="line">  run         Run a command in a new container</span><br><span class="line">  save        Save one or more images to a tar archive (streamed to STDOUT by default)</span><br><span class="line">  search      Search the Docker Hub for images</span><br><span class="line">  start       Start one or more stopped containers</span><br><span class="line">  stats       Display a live stream of container(s) resource usage statistics</span><br><span class="line">  stop        Stop one or more running containers</span><br><span class="line">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br><span class="line">  top         Display the running processes of a container</span><br><span class="line">  unpause     Unpause all processes within one or more containers</span><br><span class="line">  update      Update configuration of one or more containers</span><br><span class="line">  version     Show the Docker version information</span><br><span class="line">  wait        Block until one or more containers stop, then print their exit codes</span><br><span class="line"></span><br><span class="line">Run &apos;docker COMMAND --help&apos; for more information on a command.</span><br></pre></td></tr></table></figure>

<h3 id="Images-검색하기-Docker-Hub"><a href="#Images-검색하기-Docker-Hub" class="headerlink" title="Images 검색하기 (Docker Hub)"></a>Images 검색하기 (Docker Hub)</h3><p>Docker는 <a href="https://hub.docker.com/" target="_blank" rel="noopener">Dockker Hub</a>라는 public repository가 구축되어있습니다.<br>유명 Linux배포판과 Open Source Project의 Image는 모두 Docker Hub에 공개되어있습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker search ubuntu</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/02/25/15.png" alt="image15"></p>
<h3 id="Images-목록-확인하기"><a href="#Images-목록-확인하기" class="headerlink" title="Images 목록 확인하기"></a>Images 목록 확인하기</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/02/25/16.png" alt="image16"></p>
<h3 id="Image-다운로드하기"><a href="#Image-다운로드하기" class="headerlink" title="Image 다운로드하기"></a>Image 다운로드하기</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull [OPTION] name[:TAG|@DIGEST]</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/02/25/17.png" alt="image17"></p>
<h3 id="Images-삭제하기"><a href="#Images-삭제하기" class="headerlink" title="Images 삭제하기"></a>Images 삭제하기</h3><ul>
<li>Images로 Container가 실행되어있으면 Image는 삭제 되지 않습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker rmi [OPTION] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/18.png" alt="image18"></li>
</ul>
<h3 id="Image-History-보기"><a href="#Image-History-보기" class="headerlink" title="Image History 보기"></a>Image History 보기</h3><ul>
<li>Image생성 History 를 볼수 있습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="built_in">history</span> IMAGE</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/19.png" alt="image19"></li>
</ul>
<h3 id="Container-실행-생성"><a href="#Container-실행-생성" class="headerlink" title="Container 실행(생성)"></a>Container 실행(생성)</h3><p>Container 를 실행하는 명령은 다음과 같습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run [OPTION] IMAGE[:TAB|@DIGEST] [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>

<p>자주 사용하는 옵션들</p>
<table>
<thead>
<tr>
<th>Options</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>detached mode(background 모드)</td>
</tr>
<tr>
<td>-p</td>
<td>Host와 Container Port를 연결(port forwarding)</td>
</tr>
<tr>
<td>-v</td>
<td>Host와 Container의 Directory를 연결(mount)</td>
</tr>
<tr>
<td>-e</td>
<td>Container 내에서 사용할 환경변수 설정</td>
</tr>
<tr>
<td>-name</td>
<td>Container 이름설정</td>
</tr>
<tr>
<td>-rm</td>
<td>Container(Process) 종료시 Container 자동제거</td>
</tr>
<tr>
<td>-it</td>
<td>-i와 -t를 동시에 사용한것으로 terminal(키보드) 입력을 위한 옵션</td>
</tr>
<tr>
<td>-link</td>
<td>Conteinaer 연결</td>
</tr>
</tbody></table>
<h3 id="Container-목록-확인하기"><a href="#Container-목록-확인하기" class="headerlink" title="Container 목록 확인하기"></a>Container 목록 확인하기</h3><ul>
<li>현재 설치된 Container의 목록을 보여주는 명령어입니다.</li>
<li>일반적으로 <code>-a</code> 옵션을 붙여서 많이 사용합니다 (-a 옵션을 주지 않으면 종료된 Container는 보이지 않습니다.)<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker ps -a</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/20.png" alt="image20"></li>
</ul>
<h3 id="Container-Stop-Start-Restart"><a href="#Container-Stop-Start-Restart" class="headerlink" title="Container Stop / Start / Restart"></a>Container Stop / Start / Restart</h3><ul>
<li>실행 중인 컨테이너를 중지하거나 시작 또는 재시작할 수 있는 명령어입니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">sudo docker start CONTAINER</span><br><span class="line">sudo docker restart CONTAINER</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/21.png" alt="image21"></li>
</ul>
<h3 id="Container-제거"><a href="#Container-제거" class="headerlink" title="Container 제거"></a>Container 제거</h3><ul>
<li>Container를 제거하기 위해선 Stop 상태여야 합니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/22.png" alt="image22"></li>
</ul>
<h3 id="Container-Log-보기"><a href="#Container-Log-보기" class="headerlink" title="Container Log 보기"></a>Container Log 보기</h3><ul>
<li>Container가 정상적으로 실행이 되었는지 확인이 필요한 경우가 있습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs CONTAINER</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/23.png" alt="image23"></li>
<li>option을 주지 않는경우 전체 log를 출력합니다.</li>
<li>마지막 n줄의 log를 보는방법은 다음과 같습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs --tail 10 CONTAINER</span><br></pre></td></tr></table></figure></li>
<li>실시간 로그를 확인하는 방법은 다음과 같습니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs -f CONTAINER</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Container에-들어가기"><a href="#Container에-들어가기" class="headerlink" title="Container에 들어가기"></a>Container에 들어가기</h3><ul>
<li>Container를 관리하다 보면 실행중인 Container에 들어가야 하는경우가 많습니다.</li>
<li>Conatiner에 SSH를 설치해도 되지만 추천하지 않는다고 합니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker attach CONATINER</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Container-안의-명령-실행하기"><a href="#Container-안의-명령-실행하기" class="headerlink" title="Container 안의 명령 실행하기"></a>Container 안의 명령 실행하기</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...]</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/02/25/24.png" alt="image24"></p>
<h3 id="Container-안의-파일-꺼내기-복사하기"><a href="#Container-안의-파일-꺼내기-복사하기" class="headerlink" title="Container 안의 파일 꺼내기(복사하기)"></a>Container 안의 파일 꺼내기(복사하기)</h3><ul>
<li>Container의 내부파일을 Host에 복사하는 기능입니다.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker cp CONTAINER_NAME:PATH HOST_PATH</span><br></pre></td></tr></table></figure>
<img src="/img/2020/02/25/25.png" alt="image25"></li>
</ul>
<p>이 외에도 많은 기능들에 대해서는 <a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener">사이트</a>에서 확인해보면서 사용해 보면 될 것 같습니다. </p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://www.docker.com" target="_blank" rel="noopener">https://www.docker.com</a><br><a href="http://pyrasis.com/book/DockerForTheReallyImpatient" target="_blank" rel="noopener">http://pyrasis.com/book/DockerForTheReallyImpatient</a><br><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose" target="_blank" rel="noopener">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose</a><br><a href="https://tech.osci.kr/docker/2018/09/10/45749387/" target="_blank" rel="noopener">https://tech.osci.kr/docker/2018/09/10/45749387/</a><br><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%203.%20Docker%20Command/" data-id="ckrdkv80i00099d2ab07nahdh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 2. Docker Install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%202.%20Docker%20Install/" class="article-date">
  <time datetime="2020-02-25T05:06:27.492Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%202.%20Docker%20Install/">Docker - 2. Docker Install</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="Docker-Install"><a href="#Docker-Install" class="headerlink" title="Docker Install"></a>Docker Install</h1><p>Docker의 설치 방법은 docker docs에 보면 os별로 상세히 나와 있습니다. <a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Install</a></p>
<h3 id="제품종류"><a href="#제품종류" class="headerlink" title="제품종류"></a>제품종류</h3><table>
<thead>
<tr>
<th>Community Edition <code>(CE)</code></th>
<th>Enterprise Edition <code>(EE)</code></th>
</tr>
</thead>
<tbody><tr>
<td>Docker를 시작하고 컨테이너 기반 앱을 실험하려는<br> 개발자 및 소규모 팀에 이상적(무료)</td>
<td>업무용 응용프로그램 제작, 배송 및 실행하는<br> 엔터프라이즈 개발 및 IT팀을 위한 설계(유료)</td>
</tr>
</tbody></table>
<h3 id="Update-Cycle"><a href="#Update-Cycle" class="headerlink" title="Update Cycle"></a>Update Cycle</h3><p><img src="/img/2020/02/25/20200225_10.png" alt="image10"></p>
<p><strong>Docker CE 버전을 설치</strong></p>
<h3 id="Docker-Install-1"><a href="#Docker-Install-1" class="headerlink" title="Docker Install"></a>Docker Install</h3><ul>
<li><p>Ubuntu 18.04.3 LTS 에서 설치 진행</p>
</li>
<li><p>Docker 는 linux kernel을 사용해야 하기 때문에 root권한으로 진행되어야 합니다.</p>
</li>
<li><p><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">docker 설치 메뉴얼</a></p>
</li>
<li><p>처음 서버를 받으면 당연히 docker가 설치되어있지 않습니다.<br><img src="/img/2020/02/25/20200225_11.png" alt="image11"></p>
</li>
</ul>
<h3 id="1-package-update를-진행합니다"><a href="#1-package-update를-진행합니다" class="headerlink" title="1. package update를 진행합니다."></a>1. package update를 진행합니다.</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>

<h3 id="2-필요한-package를-설치합니다"><a href="#2-필요한-package를-설치합니다" class="headerlink" title="2. 필요한 package를 설치합니다."></a>2. 필요한 package를 설치합니다.</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg-agent \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure>

<h3 id="3-docker-의-공식-GPG-키를-추가합니다"><a href="#3-docker-의-공식-GPG-키를-추가합니다" class="headerlink" title="3. docker 의 공식 GPG 키를 추가합니다."></a>3. docker 의 공식 GPG 키를 추가합니다.</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>
<p>GPG 키가 추가되었는지 확인한다 (<code>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88</code>)<br><img src="/img/2020/02/25/20200225_12.png" alt="image12"></p>
<h3 id="4-안정적인-저장소-설정을-합니다"><a href="#4-안정적인-저장소-설정을-합니다" class="headerlink" title="4. 안정적인 저장소 설정을 합니다."></a>4. 안정적인 저장소 설정을 합니다.</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">   <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable"</span></span><br></pre></td></tr></table></figure>

<h3 id="5-Docker-CE-설치하기"><a href="#5-Docker-CE-설치하기" class="headerlink" title="5. Docker CE 설치하기"></a>5. Docker CE 설치하기</h3><ul>
<li><strong>버전을 지정하지 않고 설치 또는 업데이트를 하면 항상 최신버전이 설치되므로 안정성 측면에서 적합하지 않을 수도 있습니다.</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="6-설치확인"><a href="#6-설치확인" class="headerlink" title="6. 설치확인"></a>6. 설치확인</h3><p><img src="/img/2020/02/25/20200225_13.png" alt="image13"></p>
<h1 id="nvidia-docker-Install"><a href="#nvidia-docker-Install" class="headerlink" title="nvidia-docker Install"></a>nvidia-docker Install</h1><p>위 단계로 일반적인 Docker설치가 완료되었습니다. 하지만 NVIDIA의 GPU를 이용하시면서 여려 환경의 CUDA Toolkit을 이용할 경우<br>nvidia-docker라는 확장기능을 추가하면 보다 편리하게 사용할 수 있습니다.</p>
<p>nvidia-docker를 설치하고자 하실 경우 호스트 운영체제에 먼저 NVIDIA 드라이버가 설치되어 있어야 합니다.<br>NVIDIA의 그래픽카드 또는 GPU를 사용하지 않는 경우 이 과정을 진행하고 Docker 설치과정을 끝내실 수 있습니다.</p>
<p><img src="/img/2020/02/25/20200225_14.png" alt="image14"></p>
<h3 id="1-저장소-추가"><a href="#1-저장소-추가" class="headerlink" title="1. 저장소 추가"></a>1. 저장소 추가</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | \</span><br><span class="line">  sudo apt-key add -</span><br><span class="line"></span><br><span class="line">distribution=$(. /etc/os-release;<span class="built_in">echo</span> <span class="variable">$ID</span><span class="variable">$VERSION_ID</span>)</span><br><span class="line">curl -s -L https://nvidia.github.io/nvidia-docker/<span class="variable">$distribution</span>/nvidia-docker.list | \</span><br><span class="line">sudo tee /etc/apt/sources.list.d/nvidia-docker.list</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<h3 id="2-nvidia-docker설치"><a href="#2-nvidia-docker설치" class="headerlink" title="2. nvidia-docker설치"></a>2. nvidia-docker설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y nvidia-container-toolkit</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>NVIDIA의 CUDA Docker 컨테이너 이미지 버전들은 아래의 페이지에 방문하시면 확인 하실 수 있습니다.<br><a href="https://hub.docker.com/r/nvidia/cuda/tags/" target="_blank" rel="noopener">https://hub.docker.com/r/nvidia/cuda/tags/</a></p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://www.docker.com" target="_blank" rel="noopener">https://www.docker.com</a><br><a href="http://pyrasis.com/book/DockerForTheReallyImpatient" target="_blank" rel="noopener">http://pyrasis.com/book/DockerForTheReallyImpatient</a><br><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose" target="_blank" rel="noopener">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose</a><br><a href="https://tech.osci.kr/docker/2018/09/10/45749387/" target="_blank" rel="noopener">https://tech.osci.kr/docker/2018/09/10/45749387/</a><br><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%202.%20Docker%20Install/" data-id="ckrdkv80h00089d2af1dp7h52" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker - 1. Docker의 개념" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/25/Docker%20-%201.%20Docker%EC%9D%98%20%EA%B0%9C%EB%85%90/" class="article-date">
  <time datetime="2020-02-25T04:30:04.962Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/25/Docker%20-%201.%20Docker%EC%9D%98%20%EA%B0%9C%EB%85%90/">Docker - 1. Docker의 개념</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Docker 관련 블로그를 작성하는 중에 회사에서 공유 문서를 작성하라는 지침을 받고<br>회사 GitLab Wiki에 작성한것을 옮겨 본다.</p>
<h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><hr>
<ol>
<li>Docker <ol>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%201.%20Docker의%20개념/" target="_blank" rel="noopener">Docker 개념</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%202.%20Docker%20Install/" target="_blank" rel="noopener">Docker Install</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%203.%20Docker%20Command/" target="_blank" rel="noopener">Docker Command</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%204.%20Docker%20Example/" target="_blank" rel="noopener">Docker Example</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%205.%20Image%20만들기/" target="_blank" rel="noopener">Image 만들기</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%206.%20Dockerfile/" target="_blank" rel="noopener">Dockerfile</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%207.%20Docker%20Compose/" target="_blank" rel="noopener">Docker Compose</a></li>
<li><a href="https://thinkub.github.io/2020/02/25/Docker%20-%208.%20Image%20저장소/" target="_blank" rel="noopener">Image 저장소</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="2">
<li>Container Orchestration <ol>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%201.%20Container%20Orchestration/" target="_blank" rel="noopener">Container Orchestration 이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(1)/" target="_blank" rel="noopener">kubernetes(1)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%202.%20kubernetes(2)/" target="_blank" rel="noopener">kubernetes(2)</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%204.%20kubernetes%20install/" target="_blank" rel="noopener">kubernetes install</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%205.%20kubernetes%20ui/" target="_blank" rel="noopener">kubernetes ui</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%206.%20kubenetes를%20이용해%20배포해보기/" target="_blank" rel="noopener">kubernetes를 이용해 배포해보기</a></li>
<li><a href="https://thinkub.github.io/2020/02/26/Container%20Orchestration%20-%207.%20kubectl%20CLI/" target="_blank" rel="noopener">kubectl CLI</a></li>
</ol>
</li>
</ol>
<hr>
<ol start="3">
<li>Provisioning <ol>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%201.%20Provisioning/" target="_blank" rel="noopener">Provisioning이란</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%202.%20Ansible/" target="_blank" rel="noopener">Ansible</a></li>
<li><a href="https://thinkub.github.io/2020/02/28/Provisioning%20-%203.%20Ansible을%20이용해%20kubernetes%20cluster%20생성하기/" target="_blank" rel="noopener">Ansible을 이용해 kubernetes cluster 생성하기</a></li>
</ol>
</li>
</ol>
<h1 id="What-Is-Docker"><a href="#What-Is-Docker" class="headerlink" title="What Is Docker?"></a>What Is Docker?</h1><p>Docker는 2013년 3월 Docker에서 출시한 오픈소스 컨테이너 프로젝트입니다.</p>
<p>Docker is an open-source engine that automates the deployment of any application as a lightweight, portable, self-sufficient container that will run virtually anywhere.</p>
<blockquote>
<p>Docker는 거의 어디에서나 실행되는 경량이면서 portable하고, 자급자족인 컨테이너 응용 프로그램의 배포를 자동화하는 오픈소스 엔진입니다.</p>
</blockquote>
<p><strong>직역을 해도 docker 어떤건지에 대해 이해하기는 쉽지 않습니다.</strong><br><img src="/img/2020/02/25/20200225_01.png" alt="image01"></p>
<p>Docker는 어느 플랫폼에서나 재현가능한 어플리케이션 컨테이너를 만들어주는 것을 목표합니다.<br>LXC(리눅스 컨테이너)라는 개념에서 출발해서 특정 리눅스 배포판에서 사용 가능합니다.<br>하지만 거의 대부분이 사용하는 Linux OS 입니다. Cent, Ubuntu, Debian, Fedora 등입니다.<br>가상 머신이라고 하기보다는 격리된 환경을 만들어주는 도구입니다.</p>
<h3 id="Docker의-특징"><a href="#Docker의-특징" class="headerlink" title="Docker의 특징"></a>Docker의 특징</h3><ul>
<li>유연성(Flexible): 복잡한 Application도 Container화 할 수 있습니다.</li>
<li>경량(Lightweight): Container는 Host Kernel을 사용하고 공유합니다.</li>
<li>교환가능(Interchangeable): 업데이트 및 업그레이드를 즉시 배포 할 수 있습니다.</li>
<li>휴대성(Portable): 로컬로 구축하고, 클라우드에 배치하고, 어디서나 실행 가능합니다.</li>
<li>확장성(Scalable): Container 복제본을 늘리고 자동으로 배포 할 수 있습니다.</li>
<li>스태킹(Stackable): 서비스를 세로 및 가로로 쌓을 수 있습니다.</li>
</ul>
<h1 id="Why-Docker"><a href="#Why-Docker" class="headerlink" title="Why Docker?"></a>Why Docker?</h1><p>그렇다면 docker를 사용해야 할 이유가 뭘까요?</p>
<p>서버가 물리서버에서 클라우드 서버 환경으로 바뀌면서 클릭 몇 번 만으로 서버를 만들어 낼 수 있게 되었습니다.<br>서버의 수가 증가하면서 관리하기 어려운 환경이 되면서 <strong>Immutable Infrastructure</strong>라는 패러다임이 나왔습니다.</p>
<h3 id="Immutable-Infrastructure"><a href="#Immutable-Infrastructure" class="headerlink" title="Immutable Infrastructure"></a>Immutable Infrastructure</h3><p>호스트 OS와 서비스 운영환경을 분리하고, <strong>한 번 설정한 운영환경은  변하지 않는다</strong></p>
<ul>
<li><strong>편리한 관리</strong>: 서비스 운영 환경을 이미지로 생성했기 때문에 이미지 자체만 관리하면 됩니다. 특히 이미지를 중앙 관리하여 체계적인 배포와 관리를 할 수 있습니다. 또한, 이미지 생성 설정도 파일로 되어 있기 때문에 버전 관리 시스템을 활용할 수 있습니다.</li>
<li><strong>확장</strong> : 이미지 하나로 서버를 계속 찍어낼 수 있습니다. 따라서 클라우드 플랫폼의 자동 확장(Auto Scaling) 기능과 연동하면 손쉽게 서비스를 확장할 수 있습니다.</li>
<li><strong>테스트</strong>: 개발자의 PC나 테스트 서버에서 이미지를 실행하기만 하면 서비스 운영 환경과 동일한 환경이 구성되기 때문에 테스트가 매우 쉽습니다.</li>
<li><strong>가볍다</strong> : 운영체제와 서비스 운영 환경을 분리하여 가볍고(Lightweight) 어디서든 실행 가능한(Portable) 환경을 제공합니다.</li>
</ul>
<p><strong>Immutable Infrastructure를 구현한 프로젝트가 바로 <code>Docker</code> 입니다.</strong></p>
<p><img src="/img/2020/02/25/20200225_02.png" alt="image02"></p>
<ul>
<li>빠른 마켓 출시</li>
<li>개발자의 생산성</li>
<li>배포속도</li>
<li>IT 인프라 축소</li>
<li>IT 운영 효율성</li>
<li>빠른 문제해결</li>
</ul>
<p><strong>Docker는 Image를 이용해 Container를 생성(실행)합니다.</strong><br><strong>그러기 위해선 Docker Imager, Docker Container가 무엇인지 알아야 합니다.</strong><br><strong>Image와 Container에 대한 개념을 먼저 알아보겠습니다.</strong></p>
<h1 id="Docker-Images"><a href="#Docker-Images" class="headerlink" title="Docker Images"></a>Docker Images</h1><p>이미지는 추상적인 개념이며, 이미지를 기반으로 생성된 컨테이너가 실행됩니다.<br>이미지는 코드, 런타임, 도서관, 환경 변수 및 구성 파일 등 응용 프로그램을 실행하는 데 필요한 모든 것을 포함하는 실행 가능한 패키지로 상태값을 가지지 않고 변하지 않습니다.<strong>(Immutable)</strong><br>이미지는 직접 제작할 수도 있고 Docker Hub 와 같은 repository 에 올라가 있는 image 를 사용목적에 맞게 다운받아서 사용할 수 있습니다.</p>
<p><img src="/img/2020/02/25/20200225_03.png" alt="image03"></p>
<p>도커 이미지는 Docker hub에 등록하거나 Docker Registry 저장소를 직접 만들어 관리할 수 있습니다. 현재 공개된 도커 이미지는 50만개가 넘고 Docker hub의 이미지 다운로드 수는 80억회에 이릅니다. 누구나 쉽게 이미지를 만들고 배포할 수 있습니다.</p>
<p><img src="/img/2020/02/25/20200225_04.png" alt="image04"></p>
<p>참고로 Docker Hub는 유료입니다. 물론 무료로 사용할 수 있지만 1개의 private repository 를 제공해 줍니다. <strong>(개인사용자기준)</strong> 기업이 사용하기 위해서는 유료정책 만 있습니다.</p>
<p><img src="/img/2020/02/25/20200225_05.png" alt="image05"></p>
<p>이미지는 Container를 실행하기 위한 모든 정보를 가지고 있기 때문에 용량이 큰 편입니다. 최초 Image를 다운받은 후 기존 Image에 파일이 하나 추가됬다고 Image를 다시 다운받는다면 매우 비효율 적이죠</p>
<p>Docker는 이런 문제를 Layer라는 개념을 사용해서 해결했습니다.<br>Image는 n개의 Layer로 구성되고 파일이 추가되거나 수정되면 새로운 Layer가 생성됩니다.<br>예를들어 ubuntu 가 a, b, c layer 로 이루어져 있다면 ubuntu image 베이스로 만든 nginx Image는 A, B, C 그리고 nginx가 됩니다.<br>여기에 webapp image를 nginx 기반으로 만들어 졌다면 a, b, c, nginex, source 레이어가 합쳐진 image가 됩니다.<br>이런 구성에서 webapp source를 수정한다면 source layer 만 다운받아져서 사용이 가능합니다.</p>
<p>이런식으로 Docker는 Image를 통째로 생성하지 않고, 바뀐 부분만 생성한 뒤 부모 이미지를 계속 참조하는 방식으로 동작합니다.</p>
<p><img src="/img/2020/02/25/20200225_06.png" alt="image06"></p>
<h1 id="Docker-Container"><a href="#Docker-Container" class="headerlink" title="Docker Container"></a>Docker Container</h1><p><img src="/img/2020/02/25/20200225_07.png" alt="image07"></p>
<p><strong>Docker Container 는 Docker Image를 기반으로 실행된 상태</strong> 입니다.<br>1개의 Image로 n개의 Container를 구성 할 수 있습니다.<br>운영체제로 예를 들면 Image는 실행파일이고 Container는 실행파일로 작동하는 프로세스입니다.</p>
<p>Container는 Image로부터 생성되지만 Container내부의 내용은 변경 가능합니다. <strong>(Mutable)</strong><br>Conatiner가 변경된다고 해서 Image에는 어떠한 영향도 작용되지 않습니다.</p>
<p>Docker Container는 Linux Container에서 기반된 기술입니다.<br>초기 버전에서는 Linux Container를 사용했지만 이후로 자체 개발한 Container를 개발했습니다.</p>
<p>Container는 가상화방식중 하나로 <strong>프로세스를 격리</strong> 해줍니다.</p>
<p><a href="https://youtu.be/n-JwAM6XF88" target="_blank" rel="noopener"><img src="/img/2020/02/25/20200225_08.png" alt="Video Label"></a><br>출처 : RedHat Videos</p>
<h3 id="Docker-Container는-가상머신인가"><a href="#Docker-Container는-가상머신인가" class="headerlink" title="Docker Container는 가상머신인가?"></a>Docker Container는 가상머신인가?</h3><p><img src="/img/2020/02/25/20200225_09.png" alt="image09"></p>
<p>왼쪽이 docker Container이고 오른쪽이 VM 입니다.<br>Docker를 처음 접하는 분들은 Docker를 가상머신으로 인식하시는 분들이 많습니다.<br>Docker Container 를 볼때 외부에서 볼떄는 process 로 보이고 내부에서 보면 vm 같이 보입니다.<br>Docker는 가상화의 한 방법이긴 하지만 기존 가상화 / 반가상화 방식과는 다르게 Guest OS 설치가 필요없습니다.<br>vm의 경우에 하드웨어 리소스를 사용하기 위해 하이퍼바이저 설치가 필요하고 각자 Guest OS 설치를 해야 합니다.<br>거기에 반해 Docker Container 는 Linux 커널위에서 단순히 프로세스를 격리 시키기 때문에 가볍고 빠르게 동작합니다.</p>
<p>이러니 저러니 해도 직접 설치해서 사용해보는것 만큼 좋은 공부는 없는것 같습니다.<br>일단 Docker를 설치해보도록 하겠습니다.</p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><blockquote>
<p><a href="https://www.docker.com" target="_blank" rel="noopener">https://www.docker.com</a><br><a href="http://pyrasis.com/book/DockerForTheReallyImpatient" target="_blank" rel="noopener">http://pyrasis.com/book/DockerForTheReallyImpatient</a><br><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose" target="_blank" rel="noopener">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose</a><br><a href="https://tech.osci.kr/docker/2018/09/10/45749387/" target="_blank" rel="noopener">https://tech.osci.kr/docker/2018/09/10/45749387/</a><br><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/25/Docker%20-%201.%20Docker%EC%9D%98%20%EA%B0%9C%EB%85%90/" data-id="ckrdkv80g00079d2a5ryjadcy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Docker(2)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/03/Docker(2)/" class="article-date">
  <time datetime="2020-01-03T00:04:46.123Z" itemprop="datePublished">2020-01-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/03/Docker(2)/">Docker(2)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>지난 포스팅엔 Docker가 어떤건지 확인해봤다. 이번엔 Docker를 설치 해보고 Docker image를 이용해 container를 만들고 명령어를 알아보도록 하자.</p>
<h1 id="Docker-설치하기"><a href="#Docker-설치하기" class="headerlink" title="Docker 설치하기"></a>Docker 설치하기</h1><p>docker는 기본적으로 root권한이 필요하다. 이전 회사에서는 root권한을 일개 개발자에게 주지 않아서 관리자에게 설치 요청을 한 적도 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -fsSL https://get.docker.com/ | sudo sh</span><br></pre></td></tr></table></figure>
<p>주의할 점으로 Docker를 실행하기 위한 kernel 버전은 3.10.x 버전 이상이어야 한다.<br>ubuntu나 centos가 아닌 경우는 <a href="https://docs.docker.com/install" target="_blank" rel="noopener">이곳</a> 을 확인하자.</p>
<p>설치 확인<br><img src="/img/2020/01/03/20200103_01.JPG" alt="image01"></p>
<p>내용을 보면 버전정보가 Client와 Server로 구분되어있다. Docker는 하나의 실행파일이지만 실제로 Client와 Server를 각각 수행 할 수 있다. Docker Command를 입력하면 Docker Client가 Docker Server로 Command를 전송하고 결과를 받아 터미널에 출력해준다.<br><img src="/img/2020/01/03/20200103_02.png" alt="image02"></p>
<h1 id="Container-실행하기"><a href="#Container-실행하기" class="headerlink" title="Container 실행하기"></a>Container 실행하기</h1><p>Docker를 실행하는 명령어는 다음과 같다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run [OPTIONS] IMAGE:[:TAG|@DIGEST] [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>
<p>자주 사용하는 옵션들.</p>
<table>
<thead>
<tr>
<th>옵션</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>detached mode (BackGround Mode)</td>
</tr>
<tr>
<td>-p</td>
<td>Host와 Container Port를 연결</td>
</tr>
<tr>
<td>-v</td>
<td>Host와 Container 디렉토리를 연결</td>
</tr>
<tr>
<td>-e</td>
<td>Container에서 사용할 환경변수 설정</td>
</tr>
<tr>
<td>-name</td>
<td>Container 이름설정</td>
</tr>
<tr>
<td>-rm</td>
<td>프로세스 종료시 Container 자동 제거</td>
</tr>
<tr>
<td>-it</td>
<td>-i와 -t를 동시에 사용한 것으로 Terminal 입력을 위한 옵션</td>
</tr>
<tr>
<td>-link</td>
<td>Container연결</td>
</tr>
</tbody></table>
<h3 id="Centos7-설치해보기"><a href="#Centos7-설치해보기" class="headerlink" title="Centos7 설치해보기"></a>Centos7 설치해보기</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run centos:7</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/01/03/20200103_03.PNG" alt="image03"><br><code>run</code> 명령어를 사용하면 사용할 Image가 저장되어있는지 확인하고 없다면 다운로드 한 후 컨테이너를 생성 하고 시작한다.</p>
<p>그럼 해당 container에 centos가 정상적으로 설치되었는지 확인해보자<br><img src="/img/2020/01/03/20200103_04.PNG" alt="image04"></p>
<h1 id="Docker-CommandLine"><a href="#Docker-CommandLine" class="headerlink" title="Docker CommandLine"></a>Docker CommandLine</h1><p>docker command의 자세한 정보는 <a href="https://docs.docker.com/engine/reference/commandline/docker/" target="_blank" rel="noopener">여기</a> 에서 확인이 가능하다. 많이 사용되는 CommandLine 위주로 살펴 보자</p>
<h3 id="Container-목록-확인하기-ps"><a href="#Container-목록-확인하기-ps" class="headerlink" title="Container 목록 확인하기 (ps)"></a>Container 목록 확인하기 (ps)</h3><p>현재 설치된 Container의 목록을 보여주는 명령어이다.<br>일반적으로 <code>-a</code> 옵션을 붙여서 많이 사용한다 (-a 옵션을 주지 않으면 종료된 Container는 보이지 않는다) </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker ps -a</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/01/03/20200103_06.PNG" alt="image06"></p>
<h3 id="Container-Stop-Start"><a href="#Container-Stop-Start" class="headerlink" title="Container Stop / Start"></a>Container Stop / Start</h3><p>실행 중인 컨테이너를 중지하거나 시작 할 수 있는 명령어이다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">sudo docker start CONTAINER</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/01/03/20200103_07.PNG" alt="image07"><br>첨부된 이미지의 mysql:5.7 Container 를 Stop / Start 해봤다. Container 의 STATUS 상태를 보면 된다.</p>
<h3 id="Container-제거-rm"><a href="#Container-제거-rm" class="headerlink" title="Container 제거(rm)"></a>Container 제거(rm)</h3><p>Container를 제거하기 위해선 Stop 상태여야 한다. Container 제거하는 명령어는 아래와 같다</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/01/03/20200103_08.PNG" alt="image08"><br>첨부된 이미지에서 mysql:5.7 Container 를 삭제해봤다<br>Container 가 종료상태가 아닌 경우 제거를 시도하면 running 중이지 제거가 불가능하다는 Error가 발생한다.<br>Container 종료 후 삭제하면 정상적으로 Container 가 삭제되는 것을 확인 할 수 있다.</p>
<h3 id="Image-목록-확인하기-images"><a href="#Image-목록-확인하기-images" class="headerlink" title="Image 목록 확인하기 (images)"></a>Image 목록 확인하기 (images)</h3><p>다운로드된 이미지를 확인하는 명령어이다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/01/03/20200103_05.PNG" alt="image05"><br>제가 설치한 서버에는 centos, mongo, mysql images가 있네요</p>
<h3 id="Image-다운로드하기"><a href="#Image-다운로드하기" class="headerlink" title="Image 다운로드하기"></a>Image 다운로드하기</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull [OPTION] name[:TAG|@DIGEST]</span><br></pre></td></tr></table></figure>
<p>ubuntu 를 다운로드 해보겠습니다.<br><img src="/img/2020/01/03/20200103_09.PNG" alt="image09"></p>
<h3 id="Images-삭제하기"><a href="#Images-삭제하기" class="headerlink" title="Images 삭제하기"></a>Images 삭제하기</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker rmi [OPTION] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure>
<p>Image 삭제시 주의 할 점은 Image를 통해 Container를 생성 한 경우는 Image를 삭제 할 수 없다.<br>Container를 먼저 삭제 한 이후 삭제가 가능하다<br><img src="/img/2020/01/03/20200103_10.PNG" alt="image10"><br>첨부파일과 같이 현재 Container가 생성된 mongo의 image를 삭제하려고하면 Error가 발생한다</p>
<h3 id="Container-log보기"><a href="#Container-log보기" class="headerlink" title="Container log보기"></a>Container log보기</h3><p>Container 가 정상적으로 실행이 되었는지 확인이 필요한 경우가 있는데<br>log를 보는 방법이다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs <span class="variable">$&#123;containerId&#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="/img/2020/01/03/20200103_11.PNG" alt="image11"></p>
<p>아무 옵션을 주지 않았을 때는 전체 로그를 출력합니다.<br>마지막 10줄의 로그만 보는 방법은 아래와 같다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs --tail 10 <span class="variable">$&#123;containerId&#125;</span></span><br></pre></td></tr></table></figure>

<p>실시간 로그를 확인하는 방법은 아래와 같다</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker logs -f <span class="variable">$&#123;containerId&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Container-들어가기"><a href="#Container-들어가기" class="headerlink" title="Container 들어가기"></a>Container 들어가기</h3><p>Container를 관리하다 보면 실행중인 Container에 들어가서 로그를 확인한다거나 파일을 실행한다거나 하는 작업이 필요할 경우가 많다.<br>Container 에 SSH를 설치해도 되지만 추천하지 않는다고 한다. 컨테이너 내부에 들어가는 명령은 아래와 같다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...]</span><br></pre></td></tr></table></figure>

<p>ubuntu 서버에 설치된 centos container 에 들어가보도록 하겠다<br><img src="/img/2020/01/03/20200103_12.PNG" alt="image12"></p>
<p>이 외에 많은 기능들이 있는데 그러한 부분은 reference를 보면서 활용해 보면 될 듯 하다.</p>
<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><blockquote>
<p><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-2.html" target="_blank" rel="noopener">https://subicura.com/2017/01/19/docker-guide-for-beginners-2.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/01/03/Docker(2)/" data-id="ckrdkv80p000f9d2a7xxp7rup" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/21/%EC%97%98%EB%A0%88%EA%B0%95%ED%8A%B8%20%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8%201-1/">엘레강트 오브젝트 1-1</a>
          </li>
        
          <li>
            <a href="/2020/09/24/Spring%20Rest%20Doc/">Spring Rest Doc</a>
          </li>
        
          <li>
            <a href="/2020/09/14/JPA%20Cascade/">JPA Cascade</a>
          </li>
        
          <li>
            <a href="/2020/09/08/JPA%20Entity%20LifeCycle/">JPA Entity LifeCycle</a>
          </li>
        
          <li>
            <a href="/2020/09/07/Java14%20Releases%20notes/">Java14 Releases notes</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Ming<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>